<!DOCTYPE html>
<html>
<head>
    <title>Frame Capture Tools</title>
</head>
<body>
    <h2>Paste List Video (.mp4)</h2>

    <textarea id="list" style="width:100%;height:200px"></textarea><br><br>
    <button onclick="processVideos()">Start Capture</button>

    <pre id="output"></pre>

    <script>
    async function processVideos() {
        const text = document.getElementById("list").value.trim();
        const links = text.split("\n").filter(x => x.trim() !== "");

        const results = [];

        for (let i = 0; i < links.length; i++) {
            const url = links[i].trim();

            // ambil ID dari nama file
            const id = url.split("/").pop().replace(".mp4", "");

            document.getElementById("output").textContent =
                `Processing ${i+1}/${links.length}: ${url} ...`;

            try {
                const res = await fetch("https://r2ss-thumb.vercel.app/capture", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ url, id })
                });

                const data = await res.json();
                results.push(data);
            } catch (err) {
                results.push({ url, error: err.message });
            }
        }

        document.getElementById("output").textContent =
            JSON.stringify(results, null, 2);
    }
    </script>
</body>
</html>
